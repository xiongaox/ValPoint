# éƒ¨ç½²æŒ‡å—

**ValPoint** å¯ä»¥éƒ¨ç½²åˆ°å¤šä¸ªå¹³å°ï¼Œæ¨èä½¿ç”¨ `Vercel` æˆ– `Cloudflare Pages` ã€‚

| å¹³å° | æ˜¯å¦çœŸÂ·ä¸€é”® | README æŒ‰é’® | è‡ªåŠ¨ Fork | ç¯å¢ƒå˜é‡å¼•å¯¼
| :--- | :--- | :--- | :--- | :--- |
| Vercel | â­â­â­â­â­ | âœ… å®˜æ–¹ | âœ… | âœ… å¼ºåˆ¶å¡«å†™
| Cloudflare Pages | â­â­â­ | âš ï¸ åŠå®˜æ–¹ | âŒ | âš ï¸ æ‰‹åŠ¨
| Zeabur | â­â­â­â­ | âš ï¸ éå®˜æ–¹ | âœ… | âš ï¸ éƒ¨åˆ†

::: info ä¸€å¥è¯ç»“è®º

ğŸ‘‰ å¯¹å¤–å¼€æºé¦–é€‰ï¼šVercel

ğŸ‘‰ å›½å†…/è¾¹ç¼˜/CDNï¼šCloudflare Pages

ğŸ‘‰ å…¨æ ˆ / åç«¯ / DBï¼šZeabur

:::

## ğŸš€ Vercel éƒ¨ç½²ï¼ˆæ¨èï¼‰

### ä¼˜åŠ¿
- âœ… è‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²
- âœ… å…¨çƒ CDN åŠ é€Ÿ
- âœ… å…è´¹ SSL è¯ä¹¦
- âœ… è‡ªåŠ¨é¢„è§ˆéƒ¨ç½²
- âœ… ç¯å¢ƒå˜é‡ç®¡ç†

### éƒ¨ç½²æ­¥éª¤

#### 1. ä¸€é”®éƒ¨ç½²

ç‚¹å‡»ä¸‹é¢æŒ‰é’®ä¸€é”®éƒ¨ç½²

[![Deploy with Vercel](https://vercel.com/button)](
https://vercel.com/new/clone?repository-url=https://github.com/xiongaox/ValPoint&project-name=valpoint&repository-name=valpoint&env=VITE_SUPABASE_SHARE_ANON_KEY,VITE_SUPABASE_ANON_KEY,VITE_SUPABASE_URL,VITE_SUPABASE_SHARE_URL
)

#### 2. Fork é¡¹ç›®

å°†é¡¹ç›® `Fork` åˆ°ä½ çš„ `GitHub` è´¦å·ã€‚

#### 2. å¯¼å…¥åˆ° Vercel

1. è®¿é—® [vercel.com](https://vercel.com)
2. ç‚¹å‡» `New Project`
3. é€‰æ‹©ä½ çš„ `GitHub` ä»“åº“
4. ç‚¹å‡» `Import`

#### 3. é…ç½®é¡¹ç›®

`Vercel` ä¼šè‡ªåŠ¨æ£€æµ‹ `Vite` é¡¹ç›®ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®æ„å»ºå‘½ä»¤ã€‚

é»˜è®¤é…ç½®ï¼š
```
Build Command: npm run build
Output Directory: dist
Install Command: npm install
```

#### 4. æ·»åŠ ç¯å¢ƒå˜é‡

åœ¨ `Vercel` é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼š

```env
VITE_SUPABASE_URL=https://[PROJECT_ID].supabase.co
VITE_SUPABASE_ANON_KEY=[YOUR_ANON_KEY]
VITE_SUPABASE_SHARE_URL=https://[SHARE_PROJECT_ID].supabase.co
VITE_SUPABASE_SHARE_ANON_KEY=[YOUR_SHARE_ANON_KEY]
```

#### 5. éƒ¨ç½²

ç‚¹å‡» `Deploy` æŒ‰é’®ï¼Œç­‰å¾…æ„å»ºå®Œæˆã€‚

#### 6. é…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

1. åœ¨ `Vercel` é¡¹ç›®è®¾ç½®ä¸­ç‚¹å‡» `Domains`
2. æ·»åŠ ä½ çš„åŸŸå
3. æŒ‰ç…§æç¤ºé…ç½® `DNS` è®°å½•

### è‡ªåŠ¨éƒ¨ç½²

é…ç½®å®Œæˆåï¼Œæ¯æ¬¡æ¨é€åˆ° `GitHub` éƒ½ä¼šè‡ªåŠ¨è§¦å‘éƒ¨ç½²ï¼š
- `main` åˆ†æ”¯ â†’ ç”Ÿäº§ç¯å¢ƒ
- å…¶ä»–åˆ†æ”¯ â†’ é¢„è§ˆç¯å¢ƒ

## ğŸš€ Cloudflare Pages éƒ¨ç½²

### ä¼˜åŠ¿
- âœ… å…¨çƒ `CDN` ç½‘ç»œ
- âœ… æ— é™å¸¦å®½
- âœ… å…è´¹ `SSL` è¯ä¹¦
- âœ… å¿«é€Ÿæ„å»º

### éƒ¨ç½²æ­¥éª¤

#### 1. ä¸€é”®éƒ¨ç½²

ç‚¹å‡»ä¸‹é¢æŒ‰é’®ä¸€é”®éƒ¨ç½²

[![Deploy to Cloudflare Pages](https://deploy.workers.cloudflare.com/button)](
https://dash.cloudflare.com/?to=/:account/pages/new
)

#### 2. è¿æ¥ GitHub

1. è®¿é—® [Cloudflare Pages](https://pages.cloudflare.com)
2. ç‚¹å‡» `Create a project`
3. è¿æ¥ä½ çš„ `GitHub` è´¦å·
4. é€‰æ‹© `ValPoint` ä»“åº“

#### 2. é…ç½®æ„å»ºè®¾ç½®

```
Build command: npm run build
Build output directory: dist
Root directory: /
```

#### 3. æ·»åŠ ç¯å¢ƒå˜é‡

åœ¨é¡¹ç›®è®¾ç½®ä¸­æ·»åŠ ç¯å¢ƒå˜é‡ï¼ˆåŒ `Vercel` ï¼‰ã€‚

#### 4. éƒ¨ç½²

ç‚¹å‡» `Save and Deploy` ï¼Œç­‰å¾…æ„å»ºå®Œæˆã€‚

## ğŸš€ Zeabur éƒ¨ç½²

### ä¼˜åŠ¿
- âœ… å›½å†…è®¿é—®é€Ÿåº¦å¿«
- âœ… æ”¯æŒå…¨æ ˆéƒ¨ç½²
- âœ… è‡ªåŠ¨è¯†åˆ«é¡¹ç›®ç±»å‹
- âœ… å…è´¹é¢åº¦å……è¶³

### éƒ¨ç½²æ­¥éª¤

#### 1. ä¸€é”®éƒ¨ç½²

ç‚¹å‡»ä¸‹é¢æŒ‰é’®éƒ¨ç½²

[![Deploy on Zeabur](https://zeabur.com/button.svg)](
https://zeabur.com/templates/github?repo=xiongaox/ValPoint
)

#### 2. æ‰‹åŠ¨éƒ¨ç½²

##### 1. æ³¨å†Œå¹¶ç™»å½• Zeabur
- è®¿é—® [zeabur.com](https://zeabur.com)
- ä½¿ç”¨ GitHub è´¦å·ç™»å½•

##### 2. åˆ›å»ºæ–°é¡¹ç›®
- åœ¨æ§åˆ¶å°ç‚¹å‡» `Create Project`
- é€‰æ‹©åŒºåŸŸ

##### 3. åˆ›å»ºæœåŠ¡
- ç‚¹å‡» `Create Service`
- é€‰æ‹© `Git`
- æœç´¢å¹¶é€‰æ‹©ä½ çš„ `ValPoint` ä»“åº“

##### 4. é…ç½®ç¯å¢ƒå˜é‡
- åœ¨æœåŠ¡è®¾ç½®ä¸­æ‰¾åˆ° `Variables`
- æ·»åŠ é¡¹ç›®æ‰€éœ€çš„ `Supabase` ç¯å¢ƒå˜é‡

##### 5. ç­‰å¾…éƒ¨ç½²
- Zeabur ä¼šè‡ªåŠ¨è¯†åˆ«é¡¹ç›®ç±»å‹å¹¶å¼€å§‹æ„å»º

## ğŸš€ è‡ªæ‰˜ç®¡éƒ¨ç½²

### ä½¿ç”¨ Nginx

#### 1. æ„å»ºé¡¹ç›®

```bash
npm run build
```

#### 2. é…ç½® Nginx

```nginx
server {
    listen 80;
    server_name valpoint.example.com;
    
    root /var/www/valpoint/dist;
    index index.html;
    
    # SPA è·¯ç”±æ”¯æŒ
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # é™æ€èµ„æºç¼“å­˜
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # Gzip å‹ç¼©
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
}
```

#### 3. éƒ¨ç½²æ–‡ä»¶

```bash
# ä¸Šä¼ æ„å»ºäº§ç‰©
scp -r dist/* user@server:/var/www/valpoint/dist/

# é‡å¯ Nginx
ssh user@server "sudo systemctl restart nginx"
```

<!--
### ä½¿ç”¨ Docker

#### 1. åˆ›å»º Dockerfile

```dockerfile
# æ„å»ºé˜¶æ®µ
FROM node:18-alpine AS builder

WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
RUN npm run build

# ç”Ÿäº§é˜¶æ®µ
FROM nginx:alpine

COPY --from=builder /app/dist /usr/share/nginx/html
COPY nginx.conf /etc/nginx/conf.d/default.conf

EXPOSE 80
CMD ["nginx", "-g", "daemon off;"]
```

#### 2. åˆ›å»º nginx.conf

```nginx
server {
    listen 80;
    server_name localhost;
    
    root /usr/share/nginx/html;
    index index.html;
    
    location / {
        try_files $uri $uri/ /index.html;
    }
}
```


#### 3. æ„å»ºå’Œè¿è¡Œ

```bash
# æ„å»ºé•œåƒ
docker build -t valpoint .

# è¿è¡Œå®¹å™¨
docker run -d -p 80:80 \
  -e VITE_SUPABASE_URL=https://[PROJECT_ID].supabase.co \
  -e VITE_SUPABASE_ANON_KEY=[YOUR_ANON_KEY] \
  valpoint
```
-->

## âš™ï¸ ç¯å¢ƒå˜é‡ç®¡ç†

### å¼€å‘ç¯å¢ƒ

ä½¿ç”¨ `.env` æ–‡ä»¶ï¼š

```env
VITE_SUPABASE_URL=https://[PROJECT_ID].supabase.co
VITE_SUPABASE_ANON_KEY=[YOUR_ANON_KEY]
```

### ç”Ÿäº§ç¯å¢ƒ

åœ¨éƒ¨ç½²å¹³å°çš„ç¯å¢ƒå˜é‡è®¾ç½®ä¸­é…ç½®ï¼š

| å¹³å° | é…ç½®ä½ç½® |
|------|----------|
| Vercel | Settings â†’ Environment Variables |
| Cloudflare Pages | Settings â†’ Environment variables |
| è‡ªæ‰˜ç®¡ | `.env.production` æˆ–ç³»ç»Ÿç¯å¢ƒå˜é‡ |

::: warning å®‰å…¨æç¤º
- ä¸è¦å°† `.env` æ–‡ä»¶æäº¤åˆ° Git
- ä½¿ç”¨ä¸åŒçš„å¯†é’¥ç”¨äºå¼€å‘å’Œç”Ÿäº§ç¯å¢ƒ
- å®šæœŸæ›´æ¢å¯†é’¥
:::

## âš¡ æ€§èƒ½ä¼˜åŒ–

### æ„å»ºä¼˜åŒ–

#### 1. ä»£ç åˆ†å‰²

Vite è‡ªåŠ¨è¿›è¡Œä»£ç åˆ†å‰²ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

#### 2. å‹ç¼©

ç”Ÿäº§æ„å»ºè‡ªåŠ¨å¯ç”¨å‹ç¼©ï¼š
- `JavaScript` å‹ç¼©ï¼ˆTerserï¼‰
- `CSS` å‹ç¼©ï¼ˆcssnanoï¼‰

#### 3. Tree Shaking

è‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„ä»£ç ã€‚

### CDN é…ç½®

#### ä½¿ç”¨ Vercel CDN

Vercel è‡ªåŠ¨æä¾›å…¨çƒ `CDN` ï¼Œæ— éœ€é…ç½®ã€‚

#### ä½¿ç”¨ Cloudflare CDN

`Cloudflare Pages` è‡ªåŠ¨ä½¿ç”¨ `Cloudflare CDN` ã€‚

#### è‡ªå®šä¹‰ CDN

å¦‚æœè‡ªæ‰˜ç®¡ï¼Œå¯ä»¥é…ç½® `CDN` ï¼š

```nginx
# è®¾ç½®ç¼“å­˜å¤´
location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
    expires 1y;
    add_header Cache-Control "public, immutable";
    add_header X-Content-Type-Options "nosniff";
}
```

## ğŸ“ˆ ç›‘æ§å’Œæ—¥å¿—

### Vercel Analytics

å¯ç”¨ `Vercel Analytics` ï¼š
1. åœ¨é¡¹ç›®è®¾ç½®ä¸­å¯ç”¨ `Analytics`
2. æŸ¥çœ‹è®¿é—®ç»Ÿè®¡å’Œæ€§èƒ½æŒ‡æ ‡

### è‡ªå®šä¹‰ç›‘æ§

å¯ä»¥é›†æˆç¬¬ä¸‰æ–¹ç›‘æ§æœåŠ¡ï¼š
- Google Analytics
- Sentryï¼ˆé”™è¯¯ç›‘æ§ï¼‰
- LogRocketï¼ˆç”¨æˆ·è¡Œä¸ºï¼‰

## ğŸš€ æŒç»­é›†æˆ/æŒç»­éƒ¨ç½²ï¼ˆCI/CDï¼‰

### GitHub Actions

åˆ›å»º `.github/workflows/deploy.yml`ï¼š

```yaml
name: Deploy

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '18'
      
      - name: Install dependencies
        run: npm install
      
      - name: Build
        run: npm run build
        env:
          VITE_SUPABASE_URL: ${{ secrets.VITE_SUPABASE_URL }}
          VITE_SUPABASE_ANON_KEY: ${{ secrets.VITE_SUPABASE_ANON_KEY }}
      
      - name: Deploy to Vercel
        uses: amondnet/vercel-action@v20
        with:
          vercel-token: ${{ secrets.VERCEL_TOKEN }}
          vercel-org-id: ${{ secrets.ORG_ID }}
          vercel-project-id: ${{ secrets.PROJECT_ID }}
```

## â“ å¸¸è§é—®é¢˜

### Q: éƒ¨ç½²åé¡µé¢ç©ºç™½ï¼Ÿ

æ£€æŸ¥ï¼š
1. ç¯å¢ƒå˜é‡æ˜¯å¦é…ç½®æ­£ç¡®
2. æ„å»ºæ˜¯å¦æˆåŠŸ
3. æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯

### Q: è·¯ç”± 404 é”™è¯¯ï¼Ÿ

éœ€è¦é…ç½® `SPA` è·¯ç”±é‡å†™ï¼š
- Vercelï¼šè‡ªåŠ¨é…ç½®
- Cloudflare Pagesï¼šè‡ªåŠ¨é…ç½®
- Nginxï¼šæ·»åŠ  `try_files` é…ç½®

### Q: ç¯å¢ƒå˜é‡ä¸ç”Ÿæ•ˆï¼Ÿ

ç¡®ä¿ï¼š
1. å˜é‡åä»¥ `VITE_` å¼€å¤´
2. é‡æ–°æ„å»ºé¡¹ç›®
3. æ¸…é™¤æµè§ˆå™¨ç¼“å­˜

### Q: æ„å»ºå¤±è´¥ï¼Ÿ

æ£€æŸ¥ï¼š
1. `Node.js` ç‰ˆæœ¬ï¼ˆéœ€è¦ >= 18ï¼‰
2. ä¾èµ–æ˜¯å¦å®‰è£…å®Œæ•´
3. æ„å»ºæ—¥å¿—ä¸­çš„é”™è¯¯ä¿¡æ¯

### Q: å¦‚ä½•å›æ»šéƒ¨ç½²ï¼Ÿ

- Vercelï¼šåœ¨ `Deployments` é¡µé¢é€‰æ‹©ä¹‹å‰çš„éƒ¨ç½²ï¼Œç‚¹å‡» `Promote to Production`
- Cloudflare Pagesï¼šåœ¨ `Deployments` é¡µé¢é€‰æ‹©ä¹‹å‰çš„éƒ¨ç½²ï¼Œç‚¹å‡» `Rollback`
- è‡ªæ‰˜ç®¡ï¼šæ¢å¤ä¹‹å‰çš„æ„å»ºäº§ç‰©
